<% chart_type ||= "ColumnChart" %>

<div class="row">
<div id="<%= chart_name %>" class="span6"></div>
<div id="<%= chart_name %>_pie" class="span4"></div>
</div>
<script type="text/javascript">

var chart1; // globally available
$(document).ready(function() {
  chart1 = new Highcharts.Chart({
     chart: {
        renderTo: '<%= chart_name %>',
        defaultSeriesType: 'bar'
    },
    title: {
        text: '<%= title %>'
    },
    xAxis: {
        categories: <%= legend.inspect %>,
        title: {
            text: null
        }
    },
    tooltip: {
        formatter: function () {
            return 'Amount: ' + '$' + Highcharts.numberFormat(this.y, 0);
        }
    },
    yAxis: {
        min: 0,
        title: {
            align: 'high',
            text: 'Amount'
        },
        labels: {
            formatter: function() {
                return '$' + Highcharts.numberFormat(this.value/1000000, 0) +'M ';
            }
        }

    },
    series: [{
        name: 'Amount',
        data: <%= data.inspect %>
        }]
    });
});
</script>